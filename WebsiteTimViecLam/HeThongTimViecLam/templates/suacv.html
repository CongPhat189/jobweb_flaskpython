<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>S·ª≠a CV - JobConnect</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {background:#f5f8fb;font-family:Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .navbar {background: white; box-shadow: 0 2px 6px rgba(15,23,42,0.06)}
    .hero {padding:56px 0}
    .card-ghost {border-radius:12px; box-shadow:0 6px 20px rgba(2,6,23,0.06)}
    .form-card {padding:20px}
    .btn-create {background:#2563eb;color:white}
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="#"><strong style="color:#2563eb">Open Job</strong></a>
  </div>
</nav>

<section class="hero">
  <div class="container">
    <div class="text-center mb-5">
      <h2>S·ª≠a H·ªì S∆° Xin Vi·ªác</h2>
      <p class="text-muted">C·∫≠p nh·∫≠t th√¥ng tin CV c·ªßa b·∫°n</p>
    </div>

    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card card-ghost form-card">
          <form action="/suacv/{{ cv.id }}" method="POST">

            <h6 class="mb-3">Th√¥ng tin c√° nh√¢n</h6>
            <div class="mb-2">
              <label class="form-label small">H·ªç v√† t√™n</label>
              <input class="form-control" name="full_name" value="{{ cv.ten_hs }}" required>
            </div>
            <div class="mb-2">
              <label class="form-label small">Ch·ª©c danh</label>
              <input class="form-control" name="title" value="{{ cv.title }}">
            </div>
            <div class="mb-2">
              <label class="form-label small">ƒê·ªãa ch·ªâ</label>
              <input class="form-control" name="address" value="{{ cv.address }}">
            </div>
            <div class="mb-2">
              <label class="form-label small">S·ªë ƒëi·ªán tho·∫°i</label>
              <input class="form-control" name="phone" value="{{ cv.phone }}">
            </div>
            <div class="mb-3">
              <label class="form-label small">Email</label>
              <input type="email" class="form-control" name="email" value="{{ cv.email }}">
            </div>

            <h6 class="mb-3">Gi·ªõi thi·ªáu b·∫£n th√¢n</h6>
            <textarea class="form-control mb-3" name="summary" rows="3">{{ cv.muc_tieu_nghe_nghiep }}</textarea>

            {% set skills = cv.ky_nang|from_json %}
            <h6 class="mb-3">K·ªπ nƒÉng</h6>
             <div class="mb-2">
              <label class="form-label small">Programming Languages</label>
              <textarea class="form-control" name="skills_programming" rows="2">{{ skills["Programming Languages"] if skills }}</textarea>
            </div>

            <div class="mb-2">
              <label class="form-label small">Frontend</label>
              <textarea class="form-control" name="skills_frontend" rows="2">{{ skills["Frontend"] if skills }}</textarea>
            </div>

            <div class="mb-2">
              <label class="form-label small">Backend</label>
              <textarea class="form-control" name="skills_backend" rows="2">{{ skills["Backend"] if skills }}</textarea>
            </div>

            <div class="mb-2">
              <label class="form-label small">Deployment</label>
              <textarea class="form-control" name="skills_deployment" rows="2">{{ skills["Deployment"] if skills }}</textarea>
            </div>

            <div class="mb-2">
              <label class="form-label small">Database</label>
              <textarea class="form-control" name="skills_database" rows="2">{{ skills["Database"] if skills }}</textarea>
            </div>

            <div class="mb-3">
              <label class="form-label small">Version Control</label>
              <textarea class="form-control" name="skills_version_control" rows="2">{{ skills["Version Control"] if skills }}</textarea>
            </div>
            <h6 class="mb-3">H·ªçc v·∫•n</h6>
            <textarea class="form-control mb-3" name="education" rows="2">{{ cv.hoc_van }}</textarea>

            <h6 class="mb-3">D·ª± √°n</h6>
            <div id="projects">
              {% set projects = cv.projects|from_json %}
              {% if projects %}
                {% for p in projects %}
                <div class="mb-3">
                  <input class="form-control mb-2" name="project_title[]" value="{{ p.name }}" placeholder="T√™n d·ª± √°n">
                  <textarea class="form-control mb-2" name="project_desc[]" rows="2" placeholder="M√¥ t·∫£ d·ª± √°n">{{ p.desc }}</textarea>
                  <input class="form-control mb-2" name="project_tech[]" value="{{ p.tech }}" placeholder="C√¥ng ngh·ªá s·ª≠ d·ª•ng">
                  <input class="form-control" name="project_link[]" value="{{ p.github }}" placeholder="Github/Website">
                </div>
                {% endfor %}
              {% else %}
                <div class="mb-3">
                  <input class="form-control mb-2" name="project_title[]" placeholder="T√™n d·ª± √°n">
                  <textarea class="form-control mb-2" name="project_desc[]" rows="2" placeholder="M√¥ t·∫£ d·ª± √°n"></textarea>
                  <input class="form-control mb-2" name="project_tech[]" placeholder="C√¥ng ngh·ªá s·ª≠ d·ª•ng">
                  <input class="form-control" name="project_link[]" placeholder="Github/Website">
                </div>
              {% endif %}
            </div>

            <button type="button" class="btn btn-outline-secondary mb-3" onclick="addProject()">‚ûï Th√™m d·ª± √°n</button>

            <div class="d-grid">
              <button type="submit" class="btn btn-create">üíæ C·∫≠p nh·∫≠t CV</button>
            </div>

          </form>
        </div>
      </div>
    </div>

  </div>
</section>

<script>
  function addProject() {
    const container = document.getElementById("projects");
    const div = document.createElement("div");
    div.classList.add("mb-3");
    div.innerHTML = `
      <input class="form-control mb-2" name="project_title[]" placeholder="T√™n d·ª± √°n">
      <textarea class="form-control mb-2" name="project_desc[]" rows="2" placeholder="M√¥ t·∫£ d·ª± √°n"></textarea>
      <input class="form-control mb-2" name="project_tech[]" placeholder="C√¥ng ngh·ªá s·ª≠ d·ª•ng">
      <input class="form-control" name="project_link[]" placeholder="Github/Website">
    `;
    container.appendChild(div);
  }
</script>

</body>
</html>
